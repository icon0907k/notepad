HTTP 헤더는 **클라이언트(주로 웹 브라우저)와 서버 간의 요청과 응답에 포함된 추가 정보**를 전달하는 중요한 수단이다. 헤더는 클라이언트가 서버에 어떤 데이터를 요청하는지, 또는 서버가 응답할 때 어떤 데이터를 포함할지 정의한다. 다양한 HTTP 헤더가 있으며 이를 통해 전송되는 데이터의 형식, 인코딩 방식, 언어 등을 구체적으로 지정할 수 있다.

## 1. 주요 HTTP 헤더의 종류와 용도

- **General 헤더** : 모든 HTTP 메시지에 공통으로 적용된다. `Connection: close`처럼 클라이언트-서버 간 연결을 유지할지 결정하는 정보가 포함돤다.
- **Request 헤더** : 클라이언트 요청에 관한 정보이다. `User-Agent` 헤더는 사용 중인 웹 브라우저 정보나 디바이스 정보 등을 포함해, 서버가 클라이언트 특성에 맞는 데이터를 제공하도록 돕는다.
- **Response 헤더** : 서버 응답에 대한 정보를 제공한다. 예를 들어 `Server: Apache`와 같이 서버 소프트웨어나 버전을 알려줄 수 있다.
- **Entity 헤더** : HTTP 메시지 본문과 관련된 데이터를 정의한다. 본문의 길이 콘텐츠 타입 등 데이터에 대한 구체적인 설명을 포함해 서버가 데이터를 올바르게 해석할 수 있도록 돕는다.

> 예시 : `Content-Type: application/json; charset=UTF-8` – 본문의 데이터 형식이 JSON임을 명시합니다.
## 2. 메시지 본문과 표현 데이터의 이해
HTTP/1.1과 HTTP/2.0에서 메시지 본문이라는 용어가 사용되었으나, 최신 RFC7230 표준에서는 이를 **표현 데이터**로 변경하여 데이터 및 메타데이터로 나누고 있다. **표현 데이터**는 요청이나 응답의 본문에 전달되며 본문 형식과 인코딩 정보는 **표현 메타데이터**에 포함된다.

- **Content-Type** : 데이터 형식을 정의하며, HTML, JSON, PNG 이미지 등의 타입을 지정한다.
- **Content-Encoding** : 서버와 클라이언트가 압축을 통해 데이터 전송 속도를 높일 수 있도록 도와준다. gzip, deflate가 대표적인 인코딩 방식이다.
- **Content-Language** : 본문에 사용된 언어를 지정한다. 예를 들어 한국어는 `ko`, 영어는 `en`으로 표시된다.
- **Content-Length** : 데이터의 바이트 단위 길이를 나타낸다. 메시지 크기를 미리 알 수 있어 메모리 관리에 도움이 된다.

### 쿠키 : HTTP의 무상태성 극복
HTTP는 기본적으로 **무상태 프로토콜**로 각 요청 간 연결이 끊어지며 상태 정보가 유지되지 않는다. 이를 해결하기 위해 **쿠키**가 사용된다. 쿠키는 클라이언트에 저장된 작은 데이터 조각으로 사용자가 웹사이트에 다시 방문할 때 로그인 상태를 유지하거나 맞춤형 콘텐츠를 제공하는 데 중요한 역할을 한다.

1. **Set-Cookie** : 서버에서 클라이언트로 특정 정보를 전달해 쿠키를 저장하게 한다. `Set-Cookie: user=홍길동` 같은 형태로 로그인 정보를 저장하고 재방문 시 동일한 사용자로 식별할 수 있다.
2. **Expires와 Max-Age** : 쿠키의 유효 기간을 정의한다. `expires=Sat, 26-Dec-2020 04:39:21 GMT`와 같은 날짜 형식이나 `max-age=3600`(초 단위)로 설정할 수 있다. 이 값에 따라 브라우저가 종료되어도 쿠키가 유지되거나 삭제된다.
3. **Domain과 Path** : 쿠키의 접근 범위를 제한한다. 특정 도메인이나 경로에만 적용되도록 하여 보안성을 높일 수 있다. `domain=example.org`로 설정하면 해당 도메인뿐만 아니라 서브 도메인에서도 쿠키를 사용할 수 있다.

#### 쿠키의 보안 설정
- **Secure** : HTTPS 연결에서만 쿠키를 전송하여 데이터 보안을 강화한다.
- **HttpOnly** : JavaScript가 쿠키에 접근하지 못하게 하여 XSS(크로스 사이트 스크립팅) 공격을 방지한다.
- **SameSite** : 쿠키가 설정된 도메인과 동일한 출처에서만 전송되도록 하여 CSRF(크로스 사이트 요청 위조) 공격을 예방한다.

### 클라이언트와 서버 간 콘텐츠 협상
클라이언트는 서버에 요청할 때 자신이 원하는 콘텐츠의 언어, 데이터 형식 등을 **협상 헤더**로 명시할 수 있다. 서버는 이 정보를 바탕으로 가장 적합한 응답을 제공한다. 이 과정에서 우선순위(Quality Values)가 사용된다.

- **Accept** : 클라이언트가 수용할 수 있는 미디어 타입을 정의한다. 예를 들어 `Accept: text/html`는 HTML 문서를 요청하는 것이다.
- **Accept-Charset** : 클라이언트가 수용할 수 있는 문자 인코딩을 정의한다.
- **Accept-Encoding** : 클라이언트가 수용할 수 있는 압축 방식을 정의한다.
- **Accept-Language** : 응답할 언어에 대한 우선순위를 나타낸다. 예를 들어 `Accept-Language: ko-KR, en-US;q=0.8`와 같이 지정하면 한국어를 우선적으로 요청하며 한국어가 없을 경우 영어를 요청한다.

### HTTP 전송 방식
전송 방식에는 **단순 전송**(Content-Length 기반 전송), **압축 전송**(Content-Encoding 사용), **분할 전송**(chunked 전송), **범위 전송**(Range 사용)이 있다. 분할 전송을 통해 데이터의 일부를 나누어 전송할 수 있어 대규모 데이터를 효율적으로 관리할 수 있다.

1. **Content-Length** : 데이터를 한 번에 전송할 때 본문 길이를 명시한다.
2. **Transfer-Encoding: chunked** : 본문을 여러 조각으로 나누어 전송한다.
3. **Range**와 **Content-Range** : 부분적으로 데이터를 요청하거나 전송할 때 사용되며, 대규모 파일 다운로드 시 유용하다.

---

 요약
HTTP 헤더와 쿠키는 클라이언트-서버 통신에서 데이터를 안전하고 효율적으로 관리하는 데 중요한 요소이다. 특히 쿠키를 통해 무상태 HTTP의 단점을 보완하고 헤더를 통해 데이터의 형식과 압축 방식을 정의하여 속도와 보안을 동시에 높일 수 있다.